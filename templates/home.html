<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Add the font link below -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost&display=swap" rel="stylesheet">
    <title>Home</title>
    <style>
        /* Use the 'Jost' font for all elements */
        body,
        h2,
        .registration-form,
        .footer,
        .navbar,
        .navbar-brand,
        .alert-warning,
        .alert-warning a,
        .form-control,
        .alert-success {
            font-family: 'Jost', sans-serif;
        }

        h2 {
            color: #FFFFDD;
        }

        body {
            background-color: #79155B;
        }

        .registration-form {
            background-color: #176B87;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            margin: 0 auto;
            max-width: 2000px;
            margin-bottom: 50px;
        }

        .footer {
            background-color: #26577C;
            color: #FFF;
            padding: 20px 0;
            position: absolute;
            bottom: 0;
            width: 100%;
        }

        .navbar {
            background-color: #26577C;
            color: #FFF;
        }

        .navbar-brand {
            color: #FFF;
        }

        /* Custom styles for warning messages */
        .alert-warning {
            color: #856404;
            background-color: #FFF3CD;
            border-color: #FFEEBA;
        }

        /* Custom styles for input boxes */
        .form-control {
            width: 80%;
            /* Make input boxes half of the screen width */
            margin: 0 auto;
        }

        /* Custom styles for success messages */
        .alert-success {
            color: #155724;
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a class="navbar-brand" href="#">Your Logo</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link btn btn-warning" href="#">Logout</a>
                    </li>
                </ul>
            </div>
        </nav>

        <div class="container mt-4 content">
            <h2 class="mb-4">Book Catalog</h2>
            <div class="row" id="book-list">
                <!-- Book cards will be dynamically loaded here -->
            </div>
        </div>
        <!-- Buy Modal and Rent Modal code here -->

        <!-- Buy Modal -->
        <div class="modal fade" id="buyModal" tabindex="-1" role="dialog" aria-labelledby="buyModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="buyModalLabel">Buy Book</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <!-- Book details and user information form for buying -->
                        <h4>Book Title: Book Name</h4>
                        <p>Author: Author Name</p>
                        <p>Price: $19.99</p>
                        <form>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="First Name" required>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Last Name" required>
                            </div>
                            <div class="form-group">
                                <input type="email" class="form-control" placeholder="Email" required>
                            </div>
                            <div class="form-group">
                                <input type="tel" class="form-control" placeholder="Phone" required>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Address" required>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Postal Code" required>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Purchase</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Rent Modal -->
        <div class="modal fade" id="rentModal" tabindex="-1" role="dialog" aria-labelledby="rentModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="rentModalLabel">Rent Book</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <!-- Book details and user information form for renting -->
                        <h4>Book Title: Book Name</h4>
                        <p>Author: Author Name</p>
                        <p>Rent Price: $9.99 per day</p>
                        <form>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="First Name" required>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Last Name" required>
                            </div>
                            <div class="form-group">
                                <input type="email" class="form-control" placeholder="Email" required>
                            </div>
                            <div class="form-group">
                                <input type="tel" class="form-control" placeholder="Phone" required>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Address" required>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Postal Code" required>
                            </div>
                            <div class="form-group">
                                <input type="number" class="form-control" placeholder="Number of Days" required>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-success">Rent</button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Bootstrap Scripts and Your JavaScript for AJAX requests -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        // Function to load books via AJAX
        function loadBooks() {
            $.ajax({
                url: '/api/books', // Replace with your backend API endpoint
                method: 'GET',
                dataType: 'json',
                success: function (data) {
                    // Clear existing book cards
                    $('#book-list').empty();

                    // Loop through the retrieved books and create book cards
                    for (let i = 0; i < data.length; i++) {
                        const book = data[i];
                        const bookCard = `
                             <div class="col-md-4">
                                 <div class="book-card">
                                     <img src="${book.image}" alt="${book.title}" class="book-image">
                                     <h4>${book.title}</h4>
                                     <p>Author: ${book.author}</p>
                                     <p>Ranking: ${book.rank}</p>
                                     <button class="btn btn-primary" data-toggle="modal" data-target="#buyModal"
                                         data-book-id="${book.id}" data-action="buy">Buy</button>
                                     <button class="btn btn-success" data-toggle="modal" data-target="#rentModal"
                                         data-book-id="${book.id}" data-action="rent">Rent</button>
                                 </div>
                             </div>`;
                        $('#book-list').append(bookCard);
                    }
                },
                error: function () {
                    // Handle error
                    console.error('Error loading books.');
                }
            });
        }

        // Load books when the page loads
        $(document).ready(function () {
            loadBooks();
        });

        // Handle Buy/Rent button clicks
        $('#book-list').on('click', 'button[data-action]', function () {
            const action = $(this).data('action');
            const bookId = $(this).data('book-id');

            if (action === 'buy') {
                // Handle Buy button click
                // You can implement the Buy logic here and send data to the backend
                console.log(`Buy button clicked for book ID: ${bookId}`);
            } else if (action === 'rent') {
                // Handle Rent button click
                // You can implement the Rent logic here and send data to the backend
                console.log(`Rent button clicked for book ID: ${bookId}`);
            }
        });
    </script>
</body>

</html>